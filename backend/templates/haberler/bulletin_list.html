{% load static tailwind_tags %}
{% load widget_tweaks %}

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {% tailwind_css %}
    <title>Güvenlik Bülteni</title>
</head>
<body class="bg-gray-50 text-gray-900">
    {% include 'mainpage/navbar.html' %}

    <main class="max-w-4xl mx-auto p-6">
        <h1 class="text-3xl font-bold mb-6">Güvenlik Bülteni</h1>

        <form method="get" class="mb-6 flex gap-2">
            <input
                type="text"
                name="q"
                placeholder="Başlık veya içerikte ara..."
                value="{{ query|default_if_none:'' }}"
                class="flex-grow border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
            />
            <button
                type="submit"
                class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition"
            >
                Ara
            </button>
        </form>

        {% if bulletins %}
            {% for b in bulletins %}
                <article class="border border-gray-300 rounded p-4 mb-4 shadow-sm bg-white">
                    <h2 class="text-xl font-semibold mb-2 flex items-center gap-1">
                        <a href="{% url 'bulletin_detail' b.pk %}" class="text-blue-700 hover:underline">
                            {{ b.title }}
                        </a>
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="inline w-4 h-4 text-gray-500"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M14 3h7m0 0v7m0-7L10 14m-7 7h7a2 2 0 002-2v-7" />
                        </svg>
                    </h2>
                    <p class="mb-3 text-gray-800">{{ b.content|linebreaks }}</p>
                    <time class="text-gray-500 text-sm" datetime="{{ b.published_at|date:'c' }}">
                        {{ b.published_at|date:"d M Y H:i" }}
                    </time>
                </article>
            {% endfor %}
        {% else %}
            <p class="text-gray-600">Henüz haber eklenmedi.</p>
        {% endif %}
    </main>
</body>
</html>
